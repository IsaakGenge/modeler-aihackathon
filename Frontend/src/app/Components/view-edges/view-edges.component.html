<!-- Frontend/src/app/Components/view-edges/view-edges.component.html -->
<div class="edge-container mt-4" [ngClass]="(isDarkMode$ | async) ? 'dark-theme' : ''">
  <div *ngIf="loading" class="text-center my-3">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    <p class="mt-2">Loading connection data...</p>
  </div>

  <div *ngIf="error" class="alert alert-danger">
    <i class="bi bi-exclamation-triangle-fill me-2"></i>
    {{ error }}
  </div>

  <div *ngIf="warning" class="alert alert-warning">
    <i class="bi bi-info-circle-fill me-2"></i>
    {{ warning }}
  </div>

  <div *ngIf="edgeData && edgeData.length > 0" class="edge-data">
    <table class="table table-hover">
      <thead>
        <tr>
          <th>From</th>
          <th>To</th>
          <th>Type</th>
          <th>Created</th>
          <th>Properties</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let edge of edgeData">
          <td>{{ getNodeName(edge.source) }}</td>
          <td>{{ getNodeName(edge.target) }}</td>
          <td>{{ edge.edgeType }}</td>
          <td>{{ edge.createdAt | date }}</td>
          <td>
            <div *ngIf="edge.properties && getPropertyCount(edge.properties) > 0" class="edge-properties">
              <div class="properties-card">
                <div class="properties-content">
                  <div *ngFor="let prop of getPropertyEntries(edge.properties)" class="property-item">
                    <span class="property-key">{{ prop.key }}:</span>
                    <span class="property-value">{{ prop.value }}</span>
                  </div>
                </div>
              </div>
              <span class="badge bg-info properties-count">{{ getPropertyCount(edge.properties) }}</span>
            </div>
            <span *ngIf="!edge.properties || getPropertyCount(edge.properties) === 0" class="text-muted">None</span>
          </td>
          <td>
            <button class="btn btn-danger btn-sm"
                    (click)="initiateDeleteEdge(edge.id)"
                    data-bs-toggle="tooltip"
                    data-bs-placement="top"
                    [title]="'ID: ' + edge.id">
              <i class="bi bi-trash"></i> Delete
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div *ngIf="!loading && !error && !warning && edgeData && edgeData.length === 0" class="alert alert-info">
    <i class="bi bi-info-circle-fill me-2"></i>
    No connections available. Create a connection to get started.
  </div>
</div>

<!-- Add the confirmation modal component -->
<app-confirmation-modal [show]="showDeleteModal"
                        [title]="'Confirm Connection Deletion'"
                        [message]="'Are you sure you want to delete this connection?'"
                        [confirmButtonText]="'Delete'"
                        [isLoading]="deleteInProgress"
                        [error]="deleteError"
                        (confirm)="confirmDelete()"
                        (cancel)="cancelDelete()">
</app-confirmation-modal>
