<!-- Frontend/src/app/Components/view-fancy/view-fancy.component.html -->
<div class="view-fancy-container" [class.dark-mode]="(isDarkMode$ | async)">
  <!-- Graph Picker Component at the top -->
  <div class="graph-picker-row">
    <app-graph-picker></app-graph-picker>   
  </div>

  <!-- Warning when no graph is selected -->
  <div *ngIf="!hasSelectedGraph" class="alert alert-warning">
    Please select or create a graph to start modeling.
    <div class="mt-2">
      <button class="btn btn-primary btn-sm" routerLink="/graph-manager">Go To Graph Manager</button>
    </div>
  </div>

  <!-- Main content area -->
  <div class="row" *ngIf="hasSelectedGraph">
    <!-- Graph Visualization -->
    <div class="col-md-8">
      <div class="graph-container">
        <div class="graph-header">
          <h3>Graph Visualization</h3>          
        </div>

        <div *ngIf="loading" class="loading-indicator">
          Loading graph data...
        </div>

        <div *ngIf="warning" class="alert alert-warning">
          {{ warning }}
          <button class="btn btn-outline-secondary btn-sm" (click)="loadGraphData()">
            Refresh
          </button>
        </div>

        <div *ngIf="error" class="alert alert-danger">
          {{ error }}
          <button class="btn btn-outline-secondary btn-sm" (click)="loadGraphData()">
            Refresh
          </button>
        </div>

        <div #cyContainer class="cytoscape-container"></div>
      </div>
    </div>

    <!-- Control Panel / Tools -->
    <div class="col-md-4">
      <div class="tools-panel">
        <ul ngbNav #nav="ngbNav" [(activeId)]="activeTab" class="nav-tabs">
          <li [ngbNavItem]="1">
            <a ngbNavLink>Nodes</a>
            <ng-template ngbNavContent>
              <app-create-node></app-create-node>
            </ng-template>
          </li>
          <li [ngbNavItem]="2">
            <a ngbNavLink>Edges</a>
            <ng-template ngbNavContent>
              <app-create-edge></app-create-edge>
            </ng-template>
          </li>
          <!-- Removed GraphManager tab -->
        </ul>

        <div [ngbNavOutlet]="nav" class="tab-content"></div>
      </div>
    </div>
  </div>
</div>

